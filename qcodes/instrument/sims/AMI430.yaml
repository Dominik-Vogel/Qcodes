spec: "1.0"
devices:
  device 1:
    eom:
      GPIB INSTR:
        q: "\n"
        r: "\n"
    error: ERROR
    dialogues:
      - q: "*IDN?"
        r: "QCoDeS, AMI430_simulation, 1337, 0.0.01"

    properties:

      ramp rate units:
        default: 0
        getter:
          q: "RAMP:RATE:UNITS?"
          r: "{}"
        setter:
          q: "CONF:RAMP:RATE:UNITS {}"

      field units:
        default: 1
        getter:
          q: "FIELD:UNITS?"
          r: "{}"
        setter:
          q: "CONF:FIELD:UNITS {}"

      ramp rate current first segment:
        default: '1, 2, 1.3'
        getter:
          q: 'RAMP:RATE:CURRENT:1?'
          r: '{}'
        setter:
          q: 'CONF:RAMP:RATE:CURRENT:1 {}'

      ramp target:
        default: 0  # or what?
        getter:
          q: "FIELD:TARG?"
          r: "{}"
        setter:
          q: "CONF:FIELD:TARG {}"

      coil constant:
        default: 0.5  # I honestly have no clue...
        getter:
          q: 'COIL?'
          r: '{}'

      field magnet:
        default: 0.1
        getter:
          q: "FIELD:MAG?"
          r: "{}"
        setter:
          q: "CONF:FIELD:TARG {}"  # in the simulated instrument, the target is reached

      ramping state:
        default: 2  # always in holding state, always ready
        getter:
          q: "STATE?"
          r: "{}"

      quench state:
        default: 0
        getter:
          q: "QU?"
          r: "{}"
        setter:
          q: "QU {}"

      persistent mode:
        default: 0
        getter:
          q: "PERS?"
          r: "{}"

      persistent heater state:
        default: 0
        getter:
          q: "PS?"
          r: "{}"
        setter:
          q: "PS {}"

      pause:
        setter:
          q: "PAUSE"

      ramp:
        setter:
          q: "RAMP"


resources:  # we always need three power supplies; one for each axis
  GPIB::1::INSTR:
    device: device 1
  GPIB::2::INSTR:
    device: device 1
  GPIB::3::INSTR:
    device: device 1
